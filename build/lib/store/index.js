!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self).store=r()}(this,function(){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return JSON.parse(g(e))}function u(e){return"string"==typeof e}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return"symbol"!=r(e)&&(!isNaN(parseFloat(e))&&isFinite(e))}function n(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function i(r,e){if(u(r)){var t=null;try{t=f(r),s(t)||Array.isArray(t)||(t=g(r)),"false"!==t&&"true"!==t||(t=f(r))}catch(e){t=g(r)}return void 0===e||t?t:e}if(Array.isArray(r))return r.length?r.reduce(function(e,r){var t=null;if(u(r)&&n(c,r)){try{t=f(r)}catch(e){t=g(r)}e[r]=t}return e},{}):{}}function o(e){return JSON.parse(b(e))}function a(e){return"string"==typeof e}function l(r,e){if(a(r)){var t=null;try{t=o(r)}catch(e){t=b(r)}return void 0===e||t?t:e}if(S(r))return r.length?r.reduce(function(e,r){var t=null;if(a(r)){try{t=o(r)}catch(e){t=b(r)}t&&(e[r]=t)}return e},{}):{}}var c=localStorage,v=c.setItem.bind(c),g=c.getItem.bind(c),p=c.removeItem.bind(c),m=JSON.stringify,e={set:function(e,r){if(u(e))v(e,u(r)?r:m(r));else if(s(e))for(var t in e)v(t,u(e[t])?e[t]:m(e[t]))},get:i,del:function(e){if(u(e))p(e);else if(Array.isArray(e))for(var r=0,t=e.length;r<t;r++){var n=e[r];u(n)&&p(n)}},each:function(e){for(var r=Object.keys(localStorage),t=0,n=r.length;t<n;t++){var i=r[t];e(i,f(i))}},getOnce:function(e,r){r=i(e,r);if("string"==typeof e)n(c,e)&&p(e);else if(Array.isArray(e)&&e.length)for(var t=0;t<e.length;t++)n(c,e[t])&&p(e[t]);return r},setExpired:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];function n(e,r,t){v(e,m({startTime:a,expiredTime:t,value:r}))}var i=r[0],o=r[1],f=r[2],a=+new Date;if(1==r.length){if(s(i))for(var l in i)n(l,i[l],0)}else if(2==r.length){if(u(i))n(i,0,o);else if(s(i)&&y(o))for(var c in i)n(c,i[c],Number(o))}else 3==r.length&&u(i)&&y(f)&&n(i,o,Number(f))},getExpired:function(e){if(u(e)){var r=f(e);return r&&"startTime"in r?new Date-r.startTime>r.expiredTime?(p(e),!1):r.value:null}for(var t={},n=0;n<e.length;n++){var i,o=e[n];!u(o)||(i=f(o))&&"startTime"in i&&(new Date-i.startTime>i.expiredTime?p(e):t[o]=i.value)}return t},clearAll:function(){c.clear()},clearAllExpired:function(){for(var e=Object.keys(c).length,r=0;r<e;r++){var t=f(k);t&&"expiredTime"in t&&p(k)}}},t=sessionStorage,b=t.getItem.bind(t),d=t.setItem.bind(t),h=t.removeItem.bind(t),A=(t.clear.bind(t),JSON.stringify),S=Array.isArray;return{local:e,session:{get:l,set:function(e,r){if(a(e))d(e,A(r));else if(S(e))for(var t=0;t<e.length;t++){var n=e[t];if(o=n,"[object Object]"===Object.prototype.toString.call(o))for(var i in n)d(i,a(n[i])?n[i]:A(n[i]))}var o},del:function(e){if(a(e))h(e);else if(Array.isArray(e))for(var r=0,t=e.length;r<t;r++){var n=e[r];a(n)&&h(n)}},clearAll:function(){t.clear()},each:function(e){for(var r=Object.keys(sessionStorage),t=0;t<r.length;t++)e(r[t],l(r[t]))}}}});
//# sourceMappingURL=index.js.map
